# Модуль 6: "Связи в Doctrine ч1 Один ко многим" - Домашняя работа


## Правильная работа над проектом

Задание должно быть выполнено на отдельной ветке. После выполнения задания запуште эту ветку и создайте Merge Request. В рамках этого Merge Request будет осуществляться проверка домашней работы. Как только все замечания будут устранены - вы сольете его в ветку master.

## Доработка проекта

### Комментарии
создайте модель комментарий **Comment**, со следующими полями:
- `authorName` - имя автора
- `content` - текст комментария
- `createdAt` - дата создания комментария
- `updatedAt` - дата изменения комментария
- `deletedAt` - дата удаление комментария

Для модели используйте трейт *Timestampable*, *SoftDeletable* из расширений *doctrine*.

Создайте миграцию, для генерации таблицы этой модели.

#### Связь
Создайте нужный тип связи между комментарием и статьей.

#### Фикстуры
Создайте фикстуры для комментариев на сайте. Привяжите к каждой статье от 2 до 10 комментариев, с различной датой создания. А также с возможностью, что комментарии удалены.

### Интеграция комментариев
Интегрируйте вывод количества комментариев и самих комментариев на главной и детальной странице статьи. Комментарии должны выводится отсортированными по дате их добавления. 

При этом, на этих страницах не должно быть проблемы с производительностью вида *"N+1 запрос"* в БД.

#### Интеграция блока "Последние комменты"
Интегрируйте также верстку блока "Последние комменты" на главной странице. В нем выводятся три последних комментария на сайте. (Ссылка на автора и его должность пока остаются статичными)

### Административный раздел с комментариями
Создайте административную страницу со списком комментариев на сайте, интегрируйте приложенную верстку, и реализуйте форму поиска. Он должна фильтровать комментарии по автору, контенту и названию статьи.

Также добавьте переключатель, с помощью которого можно отображать и удаленные комментарии

## *Задание со звездочкой
Создайте сервис по генерации текста комментариев `App\Homework\CommentContentProviderInterface`, этот интерфейс должен содержать один метод:

```
get(string $word = null, int $wordsCount = 0): string
```

При вызове его метода `get()` он в виде текста должен вернуть случайный параграф. Если указано слово `$word`, то это слово должно повториться указанное количество раз, внутри этого параграфа в случайных местах (но оно не должно при этом разрывать слова на части, а должно помещаться между слов)

Используйте этот сервис при генерации контента комментария в фикстурах, и с вероятностью 70% добавляйте в комментарий предустановленное слово от 1 до 5 раз. 

### Добавление слов в текст
После реализации этого сервиса, вы обнаружите, что он ровно также добавляет слова к тексту, как и сервис генерации контента статьи. Поэтому создайте еще один сервис `App\Homework\PasteWords`

У этого сервиса должен быть один публичный метод 

```
paste(string $text, string $word, int $wordsCount = 1): string
```

Который должен в указанный текст `$text` добавить слово `$word` указанное количество раз `$wordsCount` и возвращает результирующий текст.
